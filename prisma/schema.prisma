generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_DATABASE_URL")
}

model Project {
  id             String    @id @default(cuid())
  siteAddress    String?
  projectType    String?
  sizeStoreys    Int?
  budgetBand     String?
  targetTimeline DateTime?
  createdAt      DateTime  @default(now())

  lotId String? // FK column
  lot   Lot?    @relation(fields: [lotId], references: [id])

  @@map("Project")
}

model Lot {
  id            String   @id @default(cuid())
  address       String   @unique
  zoneCode      String?
  council       String?
  lat           Decimal? @db.Decimal(9, 6)
  lng           Decimal? @db.Decimal(9, 6)
  maxHeightM    Decimal? @db.Decimal(6, 2)
  fsr           Decimal? @db.Decimal(5, 2)
  minLotSizeSqm Int?
  createdAt     DateTime @default(now())

  // ðŸ‘‡ reverse relation (important!)
  projects Project[]

  @@map("Lot")
}
